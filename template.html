<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Battle</title>
	<link href="https://fonts.googleapis.com/css?family=Volkhov:600" rel="stylesheet">
	<style>
		canvas {
			position: fixed;
			top: 0;
		}
		body {
			font-family: Volkhov;
			display: flex;
			justify-content: center;
			height: 100vh;
			align-items: center;
			margin: 0;
			overflow: hidden;
			background-image: url("assets/menuBackground.jpg");
		}
		#big-select, li {
			font-family: Volkhov;
			color: #ddd;
			font-size: 18px;
			text-transform: uppercase;
		}
		#big-select {
			margin-left: 40px;
			margin-top: 40px;
		}
		#menu {
			display: flex;
			flex-direction: column;
			flex-wrap: wrap;
			width: 70vw;
			height: 80vh;
			min-width: 800px;
			max-width: 1200px;
		}
		#game-settings {
			background-image: url("assets/menuPlayersBackground.png");
			width: 400px;
			height: 100%;
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center 100%;   
		}
		#map {
			background-image: url("assets/menuMap.png");	
			height: 200px;
			width: 350px;	
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center center;   	
			align-self: flex-end;
			font-size: 19px;
			padding: 6px 20px;
			color: #ddd;	
		}
		#start-game {
			font-family: Volkhov;
			background: none;
			border: none;
			background-image: url("assets/menuButtonBackground.png");		
			width: 200px;
			height: 60px;	
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center center;   
			align-self: flex-end;
			margin-top: auto;	
			font-size: 20px;
			color: #ddd;	
		}
		#start-game span {
			display: inline-block;
			margin-left: 35px;
			margin-top: 13px;
		}
		#start-game:hover {
				opacity: 0.9;
				cursor: pointer;
		}	
		#players-list li {
			display: none;
		}
		#players-list {
			overflow-y: auto;
			width: 240px;
			height: calc(100% - 180px);
		}





		#players-list::-webkit-scrollbar-track
		{
			-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
			border-radius: 10px;
			background-color: #F5F5F5;
		}

		#players-list::-webkit-scrollbar
		{
			width: 12px;
			background-color: transparent;
		}

		#players-list::-webkit-scrollbar-thumb
		{
			border-radius: 10px;
			-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
			background-color: #555;
		}

		#res-counter {
			z-index: 9999;
			position: fixed;
			top: 0px;
			padding: 5px;
			padding-left: 55px;
			left: 70px;
			font-size: 16px;
			color: #ffb000;
			display: none;
			background-image: url("assets/resBackground.png");		
			width: 100px;
			height: 17px;	
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center center;   
			font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif
		}




.custom-select {
  position: relative;
  font-family: Arial;
}
.custom-select select {
  display: none; /*hide original SELECT element:*/
}
.select-selected {
  background-color: rgba(255, 255, 255, 0.2);
}
/*style the arrow inside the select element:*/
.select-selected:after {
  position: absolute;
  content: "";
  top: 14px;
  right: 10px;
  width: 0;
  height: 0;
  border: 6px solid transparent;
  border-color: #fff transparent transparent transparent;
}
/*point the arrow upwards when the select box is open (active):*/
.select-selected.select-arrow-active:after {
  border-color: transparent transparent #fff transparent;
  top: 7px;
}
/*style the items (options), including the selected item:*/
.select-items div,.select-selected {
  color: #ffffff;
  padding: 8px 16px;
  border: 1px solid transparent;
  border-color: transparent transparent rgba(0, 0, 0, 0.1) transparent;
  cursor: pointer;
}
/*style items (options):*/
.select-items {
  position: absolute;
  background-color: #555;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 99;
}
/*hide the items when the select box is closed:*/
.select-hide {
  display: none;
}
.select-items div:hover {
  background-color: rgba(0, 0, 0, 0.1);
}

	</style>
</head>
<body>
	<div id="res-counter"></div>
	<div id="menu">
		<div id="game-settings">
			<div id="big-select">
				Players:
				<div class="custom-select" style="width:70px;">
					<select id="players-count">
						<option value="2">2</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
						<option value="6">6</option>
						<option value="7">7</option>
						<option value="8">8</option>
						<option value="9">9</option>
						<option value="10">10</option>
						<option value="11">11</option>
						<option value="12">12</option>
					</select>
				</div>
			</div>
			<ul id="players-list">
				<li style="display: block">
					Player #1
					<div class="custom-select" style="width:200px;">
						<select>
							<option value="aliens">aliens</option>
							<option value="humans">humans</option>
							<option value="aliens">aliens</option>
						</select>
					</div>
				</li>
				<li style="display: block">
					Player #2
					<div class="custom-select" style="width:200px;">
						<select>
							<option value="humans">humans</option>
							<option value="humans">humans</option>
							<option value="aliens">aliens</option>
						</select>
					</div>
				</li>
				<li>
						Player #3
						<div class="custom-select" style="width:200px;">
							<select>
              <option value="aliens">aliens</option>
							<option value="humans">humans</option>
              <option value="aliens">aliens</option>
							</select>
						</div>
					</li>
					<li>
						Player #4
						<div class="custom-select" style="width:200px;">
							<select>
							<option value="humans">humans</option>
							<option value="humans">humans</option>
								<option value="aliens">aliens</option>
							</select>
						</div>
					</li>
					<li>
							Player #5
							<div class="custom-select" style="width:200px;">
								<select>
									<option value="aliens">aliens</option>
									<option value="humans">humans</option>
									<option value="aliens">aliens</option>
								</select>
							</div>
						</li>
						<li>
							Player #6
							<div class="custom-select" style="width:200px;">
								<select>
									<option value="humans">humans</option>
									<option value="humans">humans</option>
									<option value="aliens">aliens</option>
								</select>
							</div>
						</li>
						<li>
								Player #7
								<div class="custom-select" style="width:200px;">
									<select>
										<option value="aliens">aliens</option>
										<option value="humans">humans</option>
										<option value="aliens">aliens</option>
									</select>
								</div>
							</li>
							<li>
								Player #8
								<div class="custom-select" style="width:200px;">
									<select>
										<option value="humans">humans</option>
										<option value="humans">humans</option>
										<option value="aliens">aliens</option>
									</select>
								</div>
							</li>
							<li>
									Player #9
									<div class="custom-select" style="width:200px;">
										<select>
											<option value="humans">humans</option>
											<option value="humans">humans</option>
											<option value="aliens">aliens</option>
										</select>
									</div>
								</li>
								<li>
									Player #10
									<div class="custom-select" style="width:200px;">
										<select>
											<option value="aliens">aliens</option>
											<option value="humans">humans</option>
											<option value="aliens">aliens</option>
										</select>
									</div>
								</li>
								<li>
										Player #11
										<div class="custom-select" style="width:200px;">
											<select>
												<option value="aliens">aliens</option>
												<option value="humans">humans</option>
												<option value="aliens">aliens</option>
											</select>
										</div>
									</li>
									<li>
										Player #12
										<div class="custom-select" style="width:200px;">
											<select>
												<option value="humans">humans</option>
												<option value="humans">humans</option>
												<option value="aliens">aliens</option>
											</select>
										</div>
									</li>
			</ul>
		</div>
		<div id="map">EASTERN PROMETHIUM</div>
		<div id="start-game"><span>START GAME</span></div>
	</div> 
	<script>
		var playersCount = 2;
		var playersCountInput = document.querySelector('#players-count');
		var playersList = document.querySelector('#players-list');
		var buttonStart = document.querySelector('#start-game');
		var menu = document.querySelector('#menu');
		var selectsCount = playersList.children.length;

		function onchange(value) {
			var count = parseInt(value, 10);
			if(count === playersCount) return;
			for(var i = 0; i < selectsCount; i++) {
				playersList.children[i].style.display = 'none';
			}
			for(var i = 0; i < count; i++) {
				playersList.children[i].style.display = 'block';
			}
			playersCount = count;
		}

		buttonStart.onclick = function() {
			var selectValues = playersList.querySelectorAll('.select-selected');
			var gameInputData = [];
			for(var i = 0; i < playersCount; i++) {
				gameInputData.push(selectValues[i].innerText);
			}
			document.removeEventListener("click", closeAllSelect);
			document.body.removeChild(menu);
			window.startGame(gameInputData);
			document.querySelector('#res-counter').style.display = 'block';
		}


		var x, i, j, selElmnt, a, b, c;
		/*look for any elements with the class "custom-select":*/
		x = document.getElementsByClassName("custom-select");
		for (i = 0; i < x.length; i++) {
		selElmnt = x[i].getElementsByTagName("select")[0];
		/*for each element, create a new DIV that will act as the selected item:*/
		a = document.createElement("DIV");
		a.setAttribute("class", "select-selected");
		a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
		x[i].appendChild(a);
		/*for each element, create a new DIV that will contain the option list:*/
		b = document.createElement("DIV");
		b.setAttribute("class", "select-items select-hide");
		for (j = 1; j < selElmnt.length; j++) {
			/*for each option in the original select element,
			create a new DIV that will act as an option item:*/
			c = document.createElement("DIV");
			c.innerHTML = selElmnt.options[j].innerHTML;
			c.addEventListener("click", function(e) {
				/*when an item is clicked, update the original select box,
				and the selected item:*/
				var i, s, h;
				s = this.parentNode.parentNode.getElementsByTagName("select")[0];
				h = this.parentNode.previousSibling;
				for (i = 0; i < s.length; i++) {
				if (s.options[i].innerHTML == this.innerHTML) {
					s.selectedIndex = i;
					if(s.id === 'players-count') {
						onchange(i + 1);
					}
					h.innerHTML = this.innerHTML;
					break;
				}
				}
				h.click();
			});
			b.appendChild(c);
		}
		x[i].appendChild(b);
		a.addEventListener("click", function(e) {
			/*when the select box is clicked, close any other select boxes,
			and open/close the current select box:*/
			e.stopPropagation();
			closeAllSelect(this);
			this.nextSibling.classList.toggle("select-hide");
			this.classList.toggle("select-arrow-active");
		});
		}
		function closeAllSelect(elmnt) {
		/*a function that will close all select boxes in the document,
		except the current select box:*/
		var x, y, i, arrNo = [];
		x = document.getElementsByClassName("select-items");
		y = document.getElementsByClassName("select-selected");
		for (i = 0; i < y.length; i++) {
			if (elmnt == y[i]) {
			arrNo.push(i)
			} else {
			y[i].classList.remove("select-arrow-active");
			}
		}
		for (i = 0; i < x.length; i++) {
			if (arrNo.indexOf(i)) {
			x[i].classList.add("select-hide");
			}
		}
		}
		/*if the user clicks anywhere outside the select box,
		then close all select boxes:*/
		document.addEventListener("click", closeAllSelect);


	</script>
	<script src="dist/bundle.js"></script>
	<script>
		document.oncontextmenu = document.body.oncontextmenu = function() {return false;}
	</script>
</body>
</html>